{"is_source_file": true, "format": "TypeScript", "description": "This file implements a comprehensive chess logic engine in TypeScript, including board and piece modeling, move generation/validation (including special moves like castling and en passant), game state management, FEN parsing/output, and undo/redo capabilities for a web-based chess frontend.", "external_files": [], "external_methods": [], "published": ["PIECE_UNICODE", "ChessGame", "inBounds", "findKing", "isAttacked", "canCastle", "exportFEN", "parseUciMove"], "classes": [{"name": "ChessGame", "description": "Main class managing the game state, move generation, move execution, and FEN handling for a chess game in the frontend."}], "methods": [{"name": "getBoard(): BoardArray { getBoard", "description": "Returns a deep copy of the current game board.", "scope": "ChessGame", "scopeKind": "class"}, {"name": "getTurn(): Color { getTurn", "description": "Returns the current player to move ('w' or 'b').", "scope": "ChessGame", "scopeKind": "class"}, {"name": "getCastlingRights(): CastlingRights { getCastlingRights", "description": "Provides the current castling rights for both sides.", "scope": "ChessGame", "scopeKind": "class"}, {"name": "getEnPassantTarget(): Square|null { getEnPassantTarget", "description": "Returns the current en passant target square, if any.", "scope": "ChessGame", "scopeKind": "class"}, {"name": "getHalfmoveClock(): number { getHalfmoveClock", "description": "Returns the halfmove clock for fifty-move rule.", "scope": "ChessGame", "scopeKind": "class"}, {"name": "getFullmoveNumber(): number { getFullmoveNumber", "description": "Returns the current move number.", "scope": "ChessGame", "scopeKind": "class"}, {"name": "status", "description": "Provides the current game status, including check, checkmate, stalemate, and draw conditions."}, {"name": "moves", "description": "Lists all legal moves from the current position, optionally filtered by starting square."}, {"name": "move", "description": "Executes a move given as a Move object or UCI string if it's legal."}, {"name": "undo", "description": "Undoes the last move, if possible."}, {"name": "redo", "description": "Redoes the move if there is a move in the redo history."}, {"name": "fen(): string { fen", "description": "Exports the current position as FEN string.", "scope": "ChessGame", "scopeKind": "class"}, {"name": "load", "description": "Loads a position from a FEN string."}, {"name": "function algebraic(i: number, j: number): Square { algebraic", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function canCastle(board: BoardArray, color: Color, side: \"K\"|\"Q\", state: GameState) { canCastle", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function cloneBoard(board: BoardArray): BoardArray { cloneBoard", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "constructor(fen?: string) { constructor", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "private copyStateWithMove(): HistoryItem { copyStateWithMove", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "function exportFEN(state: GameState): string { exportFEN", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function findKing(board: BoardArray, color: Color): Square { findKing", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private generateLegalMoves(): Move[] { generateLegalMoves", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}], "calls": ["cloneBoard", "parseUciMove", "moveToSan", "exportFEN", "inBounds", "findKing", "isAttacked", "canCastle"], "search-terms": ["TypeScript", "Chess Logic Engine", "move generation", "FEN parsing", "undo redo", "castling rights", "en passant", "promotion", "checkmate detection", "stalemate detection", "move validation", "legal move filtering"], "state": 2, "file_id": 16, "knowledge_revision": 57, "git_revision": "", "revision_history": [{"45": ""}, {"46": ""}, {"47": ""}, {"48": ""}, {"49": ""}, {"50": ""}, {"51": ""}, {"52": ""}, {"53": ""}, {"54": ""}, {"55": ""}, {"56": ""}, {"57": ""}], "ctags": [{"_type": "tag", "name": "BoardArray", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^type BoardArray = (Piece | null)[][]; \\/\\/ 8x8$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "CastlingRights", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^interface CastlingRights {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "ChessGame", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^export class ChessGame {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "Color", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^type Color = \"w\" | \"b\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "FILES", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^const FILES = \"abcdefgh\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "GameState", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^interface GameState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "GameStatus", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^export interface GameStatus {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "HistoryItem", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^interface HistoryItem extends GameState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "Move", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^interface Move {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "PIECE_UNICODE", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^export const PIECE_UNICODE: Record<Piece, string> = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Piece", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^type Piece = `${Color}${PieceType}`;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "PieceType", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^type PieceType = \"p\" | \"n\" | \"b\" | \"r\" | \"q\" | \"k\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "RANKS", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^const RANKS = \"12345678\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "START_FEN", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^const START_FEN =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Square", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^type Square = string; \\/\\/ algebraic, e.g. 'e2'$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^          add(i+di, j+dj);$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.switch", "scopeKind": "method"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const add = (ti: number, tj: number, fields: Partial<Move> = {}) => {$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.pseudolegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "algebraic", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^function algebraic(i: number, j: number): Square {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "attacked", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const attacked = isAttacked(board, kingSq, opposite(move.color));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  b: { K: boolean, Q: boolean }$/", "language": "TypeScript", "kind": "property", "scope": "CastlingRights", "scopeKind": "interface"}, {"_type": "tag", "name": "baseRank", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const baseRank = color === \"w\" ? 6 : 1;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.pseudolegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const board = cloneBoard(this.state.board);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const board = this.state.board;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const board = this.state.board;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.pseudolegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const board = this.state.board;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const board: BoardArray = [];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  board: BoardArray;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const {board, turn, castling, epTarget, halfmoveClock, fullmoveNumber}=state;$/", "language": "TypeScript", "kind": "constant", "scope": "exportFEN", "scopeKind": "function"}, {"_type": "tag", "name": "break", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        break;$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "break", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      break;$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "canCastle", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^function canCastle(board: BoardArray, color: Color, side: \"K\"|\"Q\", state: GameState) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "cap_i", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      const cap_i = color === \"w\" ? ti+1 : ti-1;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}, {"_type": "tag", "name": "cap_i", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      const cap_i = move.color === \"w\" ? ti+1 : ti-1;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "captured", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  captured?: PieceType; \\/\\/ if a normal capture$/", "language": "TypeScript", "kind": "property", "scope": "Move", "scopeKind": "interface"}, {"_type": "tag", "name": "case", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      case \"b\":$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "case", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      case \"k\": {$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "case", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      case \"q\":$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "case", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      case \"r\":$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "castling", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [piecePart, turn, castling, ep, halfmove, fullmove] = fen.trim().split(\\/\\\\s+\\/);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "castling", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  castling: CastlingRights;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "castling", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const {board, turn, castling, epTarget, halfmoveClock, fullmoveNumber}=state;$/", "language": "TypeScript", "kind": "constant", "scope": "exportFEN", "scopeKind": "function"}, {"_type": "tag", "name": "ch", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      for (const ch of rank) {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "checkmate", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  checkmate: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "GameStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "cloneBoard", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^function cloneBoard(board: BoardArray): BoardArray {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "col", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^          const col = (ch === ch.toUpperCase() ? \"w\" : \"b\") as Color;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "color", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [color, type] = [piece[0] as Color, piece[1] as PieceType];$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.pseudolegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "color", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const color = this.state.turn;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.generateLegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "color", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const {from, to, piece, color, promotion, isCapture, isEnPassant, isCastling} = move;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}, {"_type": "tag", "name": "color", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  color: Color;$/", "language": "TypeScript", "kind": "property", "scope": "Move", "scopeKind": "interface"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  constructor(fen?: string) {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "copyStateWithMove", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  private copyStateWithMove(): HistoryItem {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "default", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^      default: break;$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "di", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        const di = by === \"w\"?-1:1;$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "di", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di, dj] of [[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]]) {$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.switch", "scopeKind": "method"}, {"_type": "tag", "name": "di", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[1,0],[-1,0],[0,1],[0,-1]]) {$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "di", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]])$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "di", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[1,1],[-1,1],[-1,-1],[1,-1]]) {$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "di", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[2,1],[1,2],[-2,1],[-1,2],[2,-1],[1,-2],[-2,-1],[-1,-2]])$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di, dj] of [[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]]) {$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.switch", "scopeKind": "method"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[1,0],[-1,0],[0,1],[0,-1]]) {$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]])$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[1,1],[-1,1],[-1,-1],[1,-1]]) {$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const [di,dj] of [[2,1],[1,2],[-2,1],[-1,2],[2,-1],[1,-2],[-2,-1],[-1,-2]])$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const dj of [-1,1] as const) {$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.switch", "scopeKind": "method"}, {"_type": "tag", "name": "dj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^        for (const dj of [-1,1] as const) {$/", "language": "TypeScript", "kind": "constant", "scope": "isAttacked", "scopeKind": "function"}, {"_type": "tag", "name": "draw", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  draw: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "GameStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "ep", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [piecePart, turn, castling, ep, halfmove, fullmove] = fen.trim().split(\\/\\\\s+\\/);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "epTarget", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const {board, turn, castling, epTarget, halfmoveClock, fullmoveNumber}=state;$/", "language": "TypeScript", "kind": "constant", "scope": "exportFEN", "scopeKind": "function"}, {"_type": "tag", "name": "epTarget", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  epTarget: Square|null;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "exportFEN", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^function exportFEN(state: GameState): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fen", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  fen(): string {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "fen", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  fen?: string;$/", "language": "TypeScript", "kind": "property", "scope": "Move", "scopeKind": "interface"}, {"_type": "tag", "name": "fi", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [fi, fj] = toIdx(from), [ti, tj] = toIdx(to);$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}, {"_type": "tag", "name": "fi", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [fi, fj] = toIdx(move.from), [ti, tj] = toIdx(move.to);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const file = square[0], rank = square[1];$/", "language": "TypeScript", "kind": "constant", "scope": "toIdx", "scopeKind": "function"}, {"_type": "tag", "name": "findKing", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^function findKing(board: BoardArray, color: Color): Square {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [fi, fj] = toIdx(from), [ti, tj] = toIdx(to);$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}, {"_type": "tag", "name": "fj", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [fi, fj] = toIdx(move.from), [ti, tj] = toIdx(move.to);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "forward", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const forward = color === \"w\" ? -1 : 1;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.pseudolegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "from", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const from = algebraic(i, j);$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.pseudolegalMoves", "scopeKind": "method"}, {"_type": "tag", "name": "from", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const {from, to, piece, color, promotion, isCapture, isEnPassant, isCastling} = move;$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}, {"_type": "tag", "name": "from", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const from = str.slice(0,2);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "from", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  from: Square;$/", "language": "TypeScript", "kind": "property", "scope": "Move", "scopeKind": "interface"}, {"_type": "tag", "name": "fullmove", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [piecePart, turn, castling, ep, halfmove, fullmove] = fen.trim().split(\\/\\\\s+\\/);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "fullmoveNumber", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const {board, turn, castling, epTarget, halfmoveClock, fullmoveNumber}=state;$/", "language": "TypeScript", "kind": "constant", "scope": "exportFEN", "scopeKind": "function"}, {"_type": "tag", "name": "fullmoveNumber", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  fullmoveNumber: number;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "fullmoveNumber", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  fullmoveNumber: number;$/", "language": "TypeScript", "kind": "property", "scope": "GameStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "future", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  private future: HistoryItem[]; \\/\\/ for redo$/", "language": "TypeScript", "kind": "property", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "generateLegalMoves", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  private generateLegalMoves(): Move[] {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "getBoard", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  getBoard(): BoardArray {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "getCastlingRights", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  getCastlingRights(): CastlingRights {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "getEnPassantTarget", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  getEnPassantTarget(): Square|null {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "getFullmoveNumber", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  getFullmoveNumber(): number {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "getHalfmoveClock", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  getHalfmoveClock(): number {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "getTurn", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  getTurn(): Color {$/", "language": "TypeScript", "kind": "method", "scope": "ChessGame", "scopeKind": "class"}, {"_type": "tag", "name": "halfmove", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const [piecePart, turn, castling, ep, halfmove, fullmove] = fen.trim().split(\\/\\\\s+\\/);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "halfmoveClock", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  const {board, turn, castling, epTarget, halfmoveClock, fullmoveNumber}=state;$/", "language": "TypeScript", "kind": "constant", "scope": "exportFEN", "scopeKind": "function"}, {"_type": "tag", "name": "halfmoveClock", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  halfmoveClock: number;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "halfmoveClock", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^  halfmoveClock: number;$/", "language": "TypeScript", "kind": "property", "scope": "GameStatus", "scopeKind": "interface"}, {"_type": "tag", "name": "hist", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/chess.ts", "pattern": "/^    const hist = this.copyStateWithMove();$/", "language": "TypeScript", "kind": "constant", "scope": "ChessGame.makeMove", "scopeKind": "method"}], "hash": "81c8d3fd4f65a81c5a6b668f96c69f64", "format-version": 4, "code-base-name": "chess_game_frontend", "filename": "chess_game_frontend/src/lib/chess.ts", "fields": [{"name": "interface CastlingRights {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "interface GameState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface GameStatus {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "interface HistoryItem extends GameState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "interface Move {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "b: { K: boolean, Q: boolean }", "scope": "CastlingRights", "scopeKind": "interface", "description": "unavailable"}, {"name": "board: BoardArray;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "break;", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "captured?: PieceType; \\/\\/ if a normal capture", "scope": "Move", "scopeKind": "interface", "description": "unavailable"}, {"name": "case \"b\":", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "case \"k\": {", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "case \"q\":", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "case \"r\":", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "castling: CastlingRights;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "checkmate: boolean;", "scope": "GameStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "color: Color;", "scope": "Move", "scopeKind": "interface", "description": "unavailable"}, {"name": "default: break;", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "draw: boolean;", "scope": "GameStatus", "scopeKind": "interface", "description": "unavailable"}, {"name": "epTarget: Square|null;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "fen?: string;", "scope": "Move", "scopeKind": "interface", "description": "unavailable"}, {"name": "from: Square;", "scope": "Move", "scopeKind": "interface", "description": "unavailable"}, {"name": "fullmoveNumber: number;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "private future: HistoryItem[]; \\/\\/ for redo", "scope": "ChessGame", "scopeKind": "class", "description": "unavailable"}, {"name": "halfmoveClock: number;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}]}