{"is_source_file": true, "format": "TypeScript", "description": "This file provides utility functions for frontend API interactions related to a chess platform, including fetching game lists, saving/loading game states, and performing health checks. It uses environment variables for configuration and includes mock implementations for development or when backend services are unavailable.", "external_files": ["node-fetch", "// implied (fetch is used) but not imported explicitly, assuming runtime fetch in browsers or environment setup"], "external_methods": ["fetch"], "published": ["fetchGameList", "saveGameState", "loadGameState", "pingHealth", "API_BASE", "BACKEND_URL", "FRONTEND_URL", "WS_URL"], "classes": [], "methods": [{"name": "function getApiBase(): string { getApiBase", "description": "Selects the base URL for API requests based on environment variables, with fallback options.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchGameList(): Promise<{ id: string; name: string; }[]> { fetchGameList", "description": "Fetches the list of available chess games, returning mock data if backend is unavailable.", "scope": "", "scopeKind": ""}, {"name": "export async function saveGameState( saveGameState", "description": "Saves the current game state given a FEN string and moves array; returns success status.", "scope": "", "scopeKind": ""}, {"name": "export async function loadGameState( loadGameState", "description": "Loads game state by ID, returning mock data if backend unavailable.", "scope": "", "scopeKind": ""}, {"name": "export async function pingHealth(): Promise<{ ok: boolean; message?: string }> { pingHealth", "description": "Checks backend health status, using mock response if backend is unreachable.", "scope": "", "scopeKind": ""}], "calls": ["getApiBase", "fetch", "fetch", "fetch", "fetch", "fetch"], "search-terms": ["api.ts", "fetchGameList", "saveGameState", "loadGameState", "pingHealth", "environment variables", "mock data", "backend integration", "API base URL"], "state": 2, "file_id": 17, "knowledge_revision": 95, "git_revision": "", "revision_history": [{"93": ""}, {"94": ""}, {"95": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^const API_BASE = process.env.NEXT_PUBLIC_API_BASE || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "BACKEND_URL", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "FRONTEND_URL", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^const FRONTEND_URL = process.env.NEXT_PUBLIC_FRONTEND_URL || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "WS_URL", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^const WS_URL = process.env.NEXT_PUBLIC_WS_URL || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^  const base = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "fetchGameList", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^  const base = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "loadGameState", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^  const base = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "pingHealth", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^  const base = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "saveGameState", "scopeKind": "function"}, {"_type": "tag", "name": "fetchGameList", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^export async function fetchGameList(): Promise<{ id: string; name: string; }[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^function getApiBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loadGameState", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^export async function loadGameState($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "pingHealth", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^export async function pingHealth(): Promise<{ ok: boolean; message?: string }> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^    const resp = await fetch(`${base}\\/game\\/${id}`);$/", "language": "TypeScript", "kind": "constant", "scope": "loadGameState", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^    const resp = await fetch(`${base}\\/game\\/save`, {$/", "language": "TypeScript", "kind": "constant", "scope": "saveGameState", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^    const resp = await fetch(`${base}\\/games`);$/", "language": "TypeScript", "kind": "constant", "scope": "fetchGameList", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^    const resp = await fetch(url);$/", "language": "TypeScript", "kind": "constant", "scope": "pingHealth", "scopeKind": "function"}, {"_type": "tag", "name": "saveGameState", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^export async function saveGameState($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/online-chess-platform-165230-165239/chess_game_frontend/src/lib/api.ts", "pattern": "/^    const url = `${base}\\/health`;$/", "language": "TypeScript", "kind": "constant", "scope": "pingHealth", "scopeKind": "function"}], "hash": "c4b3d2e6b032727481f26d19a7b19ade", "format-version": 4, "code-base-name": "chess_game_frontend", "filename": "chess_game_frontend/src/lib/api.ts"}